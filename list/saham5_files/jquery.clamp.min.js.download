!function(t){t.fn.clamp=function(n){var e=t.extend({clamp:2,splitOnChars:[".","-","–","—"," "],animate:!1,truncationChar:"…",truncationHTML:"",alwaysDisplay:!1},n);return this.each(function(){var n,r,a,i=t(this),l=(t(this).text(),e.clamp),u=e.splitOnChars.slice(0),h=u[0];e.truncationHTML&&((n=document.createElement("span")).innerHTML=e.truncationHTML);function c(t,n){return getComputedStyle||(getComputedStyle=function(t,n){return this.el=t,this.getPropertyValue=function(n){var e=/(\-([a-z]){1})/g;return"float"==n&&(n="styleFloat"),e.test(n)&&(n=n.replace(e,function(){return arguments[2].toUpperCase()})),t.currentStyle&&t.currentStyle[n]?t.currentStyle[n]:null},this}),getComputedStyle(t,null).getPropertyValue(n)}function o(t,n){t.html(n+e.truncationChar)}!function(){var t,s=(t=l,function(){var t=c(i[0],"line-height");return"normal"==t&&(t=1.2*parseInt(c(i[0],"font-size"))),parseInt(t)}()*t);if(s<i.height())!function t(l,c){if(c){var s=l.html().replace(e.truncationChar,"");if(r||(h=u.length>0?u.shift():"",r=s.split(h)),r.length>1?(a=r.pop(),o(l,r.join(h))):r=null,n&&(l.html(l.html().replace(e.truncationChar,"")),i.html(l.html()+" "+n.innerHTML+e.truncationChar)),r){if(i.height()<=c){if(!(u.length>=0&&""!=h))return i.html();o(l,r.join(h)+h+a),r=null}}else""==h&&(o(l,""),u=e.splitOnChars.slice(0),h=u[0],r=null,a=null);if(!e.animate)return t(l,c);setTimeout(function(){t(l,c)},!0===e.animate?10:e.animate)}}(i,s);else if(i.html(i.html().replace(e.truncationChar,"")),e.alwaysDisplay){var m=n?n.innerHTML+e.truncationChar:e.truncationChar;i.html(i.html()+" "+m)}}()})}}(jQuery);